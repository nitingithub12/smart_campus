
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Campus Navigator</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCilupm5HjpxRvsE8RUO4neorgFrXlNg5M&libraries=places"></script>
    <style>
        #map, #pano {
            width: 100%;
            height: 400px;
            margin-bottom: 10px;
        }
        .search-bar, .navigation-buttons, .ar-mode-btn, .notifications, .settings {
            margin: 10px;
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">Smart Campus Navigator</div>
        <div class="profile-icon">Profile</div>
    </header>
    <main>
        <div class="search-bar">
            <input type="text" id="location-input" placeholder="Search for buildings, classrooms, or events...">
            <button id="search-button">Search</button>
        </div>
        <div class="map-container">
            <div id="map"></div>
            <div id="pano"></div> <!-- Street View container -->
            <button class="ar-mode-btn">AR Mode</button>
        </div>
        <nav class="navigation-buttons">
            <button id="class-schedule">Class Schedule</button>
            <button id="sos-button">SOS</button>
            <button id="help-center">Help Center</button>
        </nav>
    </main>
    <footer>
        <div class="notifications">Upcoming events, alerts, or important updates</div>
        <div class="settings">Settings</div>
    </footer>
    <script>
        let map;
        let panorama;
        let markers = [];

        function initMap() {
            map = new google.maps.Map(document.getElementById('map'), {
                center: { lat: 32.6343408, lng: 75.01036597 },
                zoom: 15,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            });

            panorama = new google.maps.StreetViewPanorama(document.getElementById('pano'), {
                position: { lat: 32.6343408, lng: 75.01036597 },
                pov: {
                    heading: 34,
                    pitch: 10
                },
                visible: false
            });

            map.addListener('click', (event) => {
                panorama.setPosition(event.latLng);
                panorama.setVisible(true);
            });

            const input = document.getElementById('location-input');
            const searchBox = new google.maps.places.SearchBox(input);

            map.addListener('bounds_changed', () => {
                searchBox.setBounds(map.getBounds());
            });

            searchBox.addListener('places_changed', () => {
                searchBoxPlaces(searchBox);
            });

            document.getElementById('search-button').addEventListener('click', () => {
                searchBoxPlaces(searchBox);
            });
        }

        function searchBoxPlaces(searchBox) {
            const places = searchBox.getPlaces();

            if (!places || places.length === 0) {
                alert("No places found.");
                return;
            }

            markers.forEach(marker => marker.setMap(null));
            markers = [];

            const bounds = new google.maps.LatLngBounds();

            places.forEach(place => {
                if (!place.geometry || !place.geometry.location) {
                    console.log("Returned place contains no geometry");
                    return;
                }

                const marker = new google.maps.Marker({
                    map,
                    title: place.name,
                    position: place.geometry.location
                });

                markers.push(marker);

                if (place.geometry.viewport) {
                    bounds.union(place.geometry.viewport);
                } else {
                    bounds.extend(place.geometry.location);
                }
            });
            map.fitBounds(bounds);
        }

        window.onload = initMap;
    </script>
</body>
</html>

